<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dotclear - JM.Grimaldi</title>
    <link>http://people.via.ecp.fr/~jm/tags/dotclear/</link>
    <description>Derniers contenus Dotclear de JM.Grimaldi</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr</language>
    <lastBuildDate>Mon, 05 Jan 2009 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://people.via.ecp.fr/~jm/tags/dotclear/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>ComBack 2, le retour</title>
      <link>http://people.via.ecp.fr/~jm/post/freestyle/comback-2-le-retour/</link>
      <pubDate>Mon, 05 Jan 2009 00:00:00 +0000</pubDate>
      
      <guid>http://people.via.ecp.fr/~jm/post/freestyle/comback-2-le-retour/</guid>
      <description>&lt;div class=&#34;message&#34;&gt;Cet article est obsolète. Le site utilise désormais le générateur &lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt; et l&#39;extension ComBack n&#39;est plus maintenue.&lt;/div&gt;

&lt;p&gt;&lt;img class=&#34;fr&#34; src=&#34;../../static/freestyle/comback.png&#34;&gt;&lt;br /&gt;
Je vous passe les jeux de mots faciles qui m’ont traversé l’esprit pour annoncer le come-back de l’extension ComBack, dont voici le pitch pour DotClear premier du nom :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Pour répondre à un commentaire avec DotClear, la seule option était d’ajouter un commentaire normal. C’est contraignant car il faut citer le comm auquel on répond, ça apparaît 3 pages plus bas etc.&lt;/li&gt;
&lt;li&gt;Pour ceux qui ne connaissent pas over-blog, cette plate-forme propose une fonctionnalité bien pratique dans la liste des commentaires côté administration : Répondre à un commentaire. Ça permet d’éditer un comm apparemment normal, sauf que côté blog il n’est pas comptabilisé, et apparaît juste sous le comm auquel on répond. De plus il est possible d’affecter à ces réponses un style différent des commentaires.&lt;/li&gt;
&lt;li&gt;J’avais envie de cette fonctionnalité sous DotClear, mais le plugin n’existait pas. C’est réparé, voici ComBack.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Et voici enfin le portage de ce plugin pour DotClear2.&lt;/p&gt;

&lt;p&gt;Pour DotClear 2.1.4 :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;../../static/freestyle/comback-2.0.zip&#34;&gt;Archive zip&lt;/a&gt; (20 Ko)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Vous pourrez voir une démonstration dans les commentaires de ce billet.&lt;/p&gt;

&lt;p&gt;C’est encore loin d’être parfait. Il manque notamment la fonctionnalité de fil RSS, mais les bonnes volontés sont les bienvenues pour l’ajouter.&lt;/p&gt;

&lt;p&gt;J’en profite pour regretter la pauvreté de la documentation développeur de DC2, qui est un frein important à la création de nouveaux plugins.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Trackbacks par Technorati</title>
      <link>http://people.via.ecp.fr/~jm/post/freestyle/trackbacks-par-technorati/</link>
      <pubDate>Sat, 06 Jan 2007 00:00:00 +0000</pubDate>
      
      <guid>http://people.via.ecp.fr/~jm/post/freestyle/trackbacks-par-technorati/</guid>
      <description>&lt;p&gt;Technorati, le moteur de recherche de blogs qui vient d’ailleurs d’être &lt;a href=&#34;https://web.archive.org/web/20070107174812/http://weblogs.hitwise.com/leeann-prescott/2006/12/google_blog_search_surpasses_t.html&#34;&gt;dépassé par Google Blog Search&lt;/a&gt;, propose aux blogueurs &lt;a href=&#34;https://web.archive.org/web/20070106074441/http://technorati.com/tools/linkcount/&#34;&gt;un widget&lt;/a&gt; destiné à remplacer le système des trackbacks. Ce système repose sur une déclaration explicite par les blogueurs des références qu’ils font à un billet donné : si je rebondis sur un article de machin, je mets un lien dans mon billet, et en plus je dois le &lt;em&gt;pinguer&lt;/em&gt;. Comme c’est fastidieux, les trackbacks recensés sont incomplets. Au lieu d’attendre ces déclarations, le widget de Technorati fait une requête sur le moteur.&lt;/p&gt;

&lt;p&gt;Pour l’intégrer à Dotclear 2 c’est simple, il suffit dans le thème de remplacer&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;a href=&amp;quot;{{tpl:EntryURL}}#pings&amp;quot; class=&amp;quot;ping_count&amp;quot;&amp;gt;{{tpl:EntryTrackbackCount}}&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;par&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script src=&amp;quot;http://embed.technorati.com/linkcount&amp;quot; type=&amp;quot;text/javascript&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;a class=&amp;quot;tr-linkcount&amp;quot; href=&amp;quot;http://technorati.com/search/{{tpl:EntryURL}}&amp;quot;&amp;gt;View blog reactions&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Inconvénient, le message est forcément en Anglais, et lorsqu’il n’y a aucun trackback on a quand même droit au lien vers Technorati. Mais la comparaison avec les trackbacks traditionnels serait intéressante. Pour ma part j’y reviendrai lorsque j’aurai matière à comparaison &lt;img class=&#34;il&#34; src=&#34;../../static/freestyle/smilies/icon_smile.gif&#34; alt=&#34;:-)&#34;&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Via &lt;a href=&#34;http://www.fredcavazza.net/?2006/11/23/1350-technorati-invente-le-trackback-automatique&#34;&gt;FredCavazza.net&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ComBack : conception</title>
      <link>http://people.via.ecp.fr/~jm/post/dotclear/comback-conception/</link>
      <pubDate>Thu, 11 May 2006 00:00:00 +0000</pubDate>
      
      <guid>http://people.via.ecp.fr/~jm/post/dotclear/comback-conception/</guid>
      <description>

&lt;p&gt;Mon dernier billet présentait le plugin ComBack pour DotClear qui permet aux auteurs d&amp;rsquo;un blog de répondre aux commentaires de leurs visiteurs. Pourquoi avoir créé une nouvelle table ? Pourquoi un nouvel écran de gestion ? Pourquoi le ciel est bleu ? Autant de questions brûlantes qui trouvent leur réponse ici (sauf une)&amp;hellip;&lt;/p&gt;

&lt;h3 id=&#34;analyse-de-l-existant&#34;&gt;Analyse de l&amp;rsquo;existant&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Côté blog l&amp;rsquo;affichage des commentaires déjà postés est fait dans le thème :

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;list.php&lt;/code&gt; (liste des billets) qui affiche le nombre de comms pour chaque billet via &lt;code&gt;dcPostNbComments()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;post.php&lt;/code&gt; (affichage d&amp;rsquo;un billet) qui parcourt les commentaires (&lt;code&gt;while ($comments-&amp;gt;fetch())&lt;/code&gt;) et affiche les différents éléments dcComment*() correspondant à chacun : &lt;code&gt;ID, Date, Time, Author, Content&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Côté admin les écrans de gestion des commentaires sont sous &lt;code&gt;ecrire/&lt;/code&gt; :

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;comments.php&lt;/code&gt; (liste des commentaires) qui récupère le nombre de commentaires (&lt;code&gt;$blog-&amp;gt;getNbComments()&lt;/code&gt;) pour faire la pagination, ainsi que la liste complète (&lt;code&gt;$blog-&amp;gt;getComments()&lt;/code&gt;), et leur contenu (&lt;code&gt;$comments-&amp;gt;getData()&lt;/code&gt;), qu&amp;rsquo;il affiche pour chacun (&lt;code&gt;ligne_comment()&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;poster.php&lt;/code&gt; (édition d&amp;rsquo;un billet) qui récupère les commentaire du post (&lt;code&gt;$blog-&amp;gt;getComments()&lt;/code&gt;), les affiche (&lt;code&gt;showComments()&lt;/code&gt;) avec pour chacun : auteur, date, mail, site, IP, contenu, et liens de mise en/hors ligne, de suppression, et de modification. Cet écran permet également d&amp;rsquo;ajouter un commentaire. Et c&amp;rsquo;est lui qui gère la suppression des comms (&lt;code&gt;$blog-&amp;gt;delComment()&lt;/code&gt;) et leur mise en/hors ligne (&lt;code&gt;$blog-&amp;gt;statusComment()&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;comment.php&lt;/code&gt; (modification d&amp;rsquo;un commentaire) affiche les différents champs du comm dans des zones éditables (sauf IP et date) et permet d&amp;rsquo;enregistrer ou supprimer le comm&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;limitations-des-plugins-dotclear&#34;&gt;Limitations des plugins dotclear&lt;/h3&gt;

&lt;p&gt;Un plugin dotclear ne permet pas de modifier les écrans d&amp;rsquo;administration, simplement d&amp;rsquo;en ajouter de nouveaux. Toucher aux fichiers existants, les fichiers &lt;em&gt;core&lt;/em&gt;, serait une plaie pour la maintenabilité.&lt;/p&gt;

&lt;h3 id=&#34;stockage-des-commentaires&#34;&gt;Stockage des commentaires&lt;/h3&gt;

&lt;p&gt;Les commentaires sont stockés dans la table &lt;code&gt;dc_comment&lt;/code&gt; :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;comment_id (int(11)) : ID unique du commentaire, non affiché&lt;/li&gt;
&lt;li&gt;post_id (int(11)) : ID du billet&lt;/li&gt;
&lt;li&gt;comment_dt (datetime) : date de création du comm&lt;/li&gt;
&lt;li&gt;comment_upddt (datetime) : date de modification du comm&lt;/li&gt;
&lt;li&gt;comment_auteur (varchar(255)) : nom du commentateur&lt;/li&gt;
&lt;li&gt;comment_email (varchar(255)) : son mail&lt;/li&gt;
&lt;li&gt;comment_site (varchar(255)) : sa page&lt;/li&gt;
&lt;li&gt;comment_content (longtext) : texte du commentaire&lt;/li&gt;
&lt;li&gt;comment_ip (varchar(15)) : IP du commentateur&lt;/li&gt;
&lt;li&gt;comment_pub (int(1)) : en/hors ligne&lt;/li&gt;
&lt;li&gt;comment_trackback (int(1)) : trackback ou commentaire&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Cette table sert également à stocker les trackbacks, identifiés par un comment_trackback à 1 contre 0 pour les commentaires. Ces trackbacks sont créés lorsqu&amp;rsquo;un billet externe possède un lien vers notre billet. L&amp;rsquo;auteur du trackback est le titre du blog externe, le site est l&amp;rsquo;adresse du billet externe, le contenu est son titre et ses premiers mots. Ces trackbacks sont extraits des listes de commentaires avant de les lister (fonction &lt;code&gt;extractTrackbacks()&lt;/code&gt;).&lt;/p&gt;

&lt;h3 id=&#34;autres-contraintes&#34;&gt;Autres contraintes&lt;/h3&gt;

&lt;p&gt;En tant qu&amp;rsquo;utilisateur, si un jour je décide de retirer le plugin ComBack, j&amp;rsquo;aimerais que mes réponses ne soient pas tout à fait perdues. Cela m&amp;rsquo;aurait orienté plutôt vers l&amp;rsquo;utilisation des commentaires pour gérer les réponses que vers la création d&amp;rsquo;un nouvel objet. Mais alors pour adapter par exemple le comptage des commentaires (qui ne doit pas prendre en compte les réponses) j&amp;rsquo;aurais dû redéfinir des fonctions existantes : incompatible avec une maintenabilité satisfaisante&amp;hellip;&lt;/p&gt;

&lt;p&gt;De plus, l&amp;rsquo;utilisation des formulaires existants pour les commentaires est problématique car il ne faut pas que n&amp;rsquo;importe quel visiteur puisse pourrir les commentaires en ajoutant des réponses. Et utiliser des champs &lt;em&gt;réservés&lt;/em&gt; comme comment_trackback va encore à l&amp;rsquo;encontre de la maintenabilité.&lt;/p&gt;

&lt;h3 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;Ces points font que j&amp;rsquo;ai finalement choisi de gérer les réponses séparément des commentaires. Si quelqu&amp;rsquo;un veut retirer ComBack et récupérer le contenu des réponses, il pourra faire un script de migration.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Plugin ComBack pour DotClear</title>
      <link>http://people.via.ecp.fr/~jm/post/dotclear/plugin-comback-pour-dotclear/</link>
      <pubDate>Thu, 11 May 2006 00:00:00 +0000</pubDate>
      
      <guid>http://people.via.ecp.fr/~jm/post/dotclear/plugin-comback-pour-dotclear/</guid>
      <description>

&lt;p&gt;&lt;img class=&#34;fr&#34; src=&#34;../../static/dotclear/comback.png&#34;&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&#34;message&#34;&gt;&lt;b&gt;5 jan 2009 :&lt;/b&gt; Le portage ComBack pour DotClear2 est disponible &lt;a href=&#34;../../post/freestyle/comback-2-le-retour/&#34;&gt;ici&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Pour répondre à un commentaire avec DotClear, la seule option était d&amp;rsquo;ajouter un commentaire &lt;em&gt;normal&lt;/em&gt;. C&amp;rsquo;est contraignant car il faut citer le comm auquel on répond, ça apparaît 3 pages plus bas etc.&lt;/p&gt;

&lt;p&gt;Pour ceux qui ne connaissent pas over-blog, cette plate-forme propose une fonctionnalité bien pratique dans la liste des commentaires côté administration : &lt;em&gt;Répondre à un commentaire&lt;/em&gt;. Ça permet d&amp;rsquo;éditer un comm apparemment normal, sauf que côté blog il n&amp;rsquo;est pas comptabilisé, et apparaît juste sous le comm auquel on répond. De plus il est possible d&amp;rsquo;affecter à ces réponses un style différent des commentaires.&lt;/p&gt;

&lt;p&gt;J&amp;rsquo;avais envie de cette fonctionnalité sous DotClear, mais le plugin n&amp;rsquo;existait pas. C&amp;rsquo;est réparé, voici ComBack :&lt;/p&gt;

&lt;p&gt;Pour DotClear 1.2.7 :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;../../static/dotclear/plugin-comback-1.4.pkg.gz&#34;&gt;Installeur&lt;/a&gt; (20 Ko)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;../../static/dotclear/plugin-comback-1.4.tar.gz&#34;&gt;Archive tar.gz&lt;/a&gt; (16 Ko)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Pour DotClear &amp;lt;1.2.7 :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;../../static/dotclear/plugin-comback-1.3.pkg.gz&#34;&gt;Installeur&lt;/a&gt; (20 Ko)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;../../static/dotclear/plugin-comback-1.3.tar.gz&#34;&gt;Archive tar.gz&lt;/a&gt; (16 Ko)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Attention, pour ajouter une réponse on n’utilise pas l’onglet &lt;em&gt;Commentaires&lt;/em&gt;, mais la page &lt;em&gt;ComBack&lt;/em&gt; de l&amp;rsquo;onglet &lt;em&gt;Outils&lt;/em&gt;.&lt;/p&gt;

&lt;h4 id=&#34;changelog&#34;&gt;ChangeLog&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;2007-08-14 Version 1.4 : fil RSS chronologique, global ou pour un post&lt;/li&gt;
&lt;li&gt;2007-08-10 Version 1.3.1 : compatibilité DotClear 1.2.7&lt;/li&gt;
&lt;li&gt;2006-10-13 Version 1.3 : smileys dans les réponses, correction de typage dans la table comback, amélioration de l&amp;rsquo;aide&lt;/li&gt;
&lt;li&gt;2006-05-24 Version 1.2 : nombre de réponses sur un billet, fil RSS des commentaires &amp;amp; réponses d&amp;rsquo;un billet, &amp;hellip;&lt;/li&gt;
&lt;li&gt;2006-05-12 Version 1.1 : installation simplifiée, et affiche &amp;lsquo;Prénom Nom&amp;rsquo; lorsque le pseudo n&amp;rsquo;est pas renseigné&lt;/li&gt;
&lt;li&gt;2006-05-11 Version 1.0.1 : compatibilité PHP4&lt;/li&gt;
&lt;li&gt;2006-05-10 Version 1.0 : 1ère version&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;installation&#34;&gt;Installation&lt;/h3&gt;

&lt;p&gt;La table dc_comback est créée automatiquement lors du premier accès à l&amp;rsquo;interface d&amp;rsquo;administration.&lt;/p&gt;

&lt;p&gt;Pour afficher vos réponses, ajoutez &lt;code&gt;&amp;lt;?php dcComback::display(); ?&amp;gt;&lt;/code&gt; à la fin de la boucle de parcours des commentaires, dans le &lt;code&gt;post.php&lt;/code&gt; de votre thème :&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;...
&amp;lt;?php while ($comments-&amp;gt;fetch()) :
    ...
    &amp;lt;blockquote&amp;gt;
    &amp;lt;?php dcCommentContent(); ?&amp;gt;
    &amp;lt;/blockquote&amp;gt;

    **&amp;lt;?php dcComback::display(); ?&amp;gt;**
&amp;lt;?php endwhile; ?&amp;gt;
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Pour la personnalisation et les fonctions avancées, voyez l&amp;rsquo;aide dans l&amp;rsquo;interface d&amp;rsquo;admin du plugin.&lt;/p&gt;

&lt;h3 id=&#34;mise-à-jour&#34;&gt;Mise à jour&lt;/h3&gt;

&lt;p&gt;Pour installer une nouvelle version de ComBack, effacez simplement le répertoire &lt;code&gt;ecrire/tools/comback/&lt;/code&gt; et installez le nouveau package ComBack.&lt;/p&gt;

&lt;h3 id=&#34;détails&#34;&gt;Détails&lt;/h3&gt;

&lt;p&gt;Les réponses sont stockées dans la table &lt;code&gt;dc_comback&lt;/code&gt; :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;comment_id (int(11)) : ID du commentaire&lt;/li&gt;
&lt;li&gt;user_id (varchar(32)) : ID de l&amp;rsquo;administrateur qui a posté la réponse (table dc_user)&lt;/li&gt;
&lt;li&gt;comback_dt (datetime) : date de création de la réponse&lt;/li&gt;
&lt;li&gt;comback_upddt (datetime) : date de modification de la réponse&lt;/li&gt;
&lt;li&gt;comback_content (longtext) : contenu de la réponse&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;NB :&lt;/strong&gt; comme on a au plus 1 réponse par commentaire, c&amp;rsquo;est l&amp;rsquo;ID du commentaire qui sert d&amp;rsquo;ID unique de la réponse&lt;/p&gt;

&lt;p&gt;&lt;em&gt;J&amp;rsquo;explique les choix de conception dans un &lt;a href=&#34;../../post/dotclear/comback-conception/&#34;&gt;autre billet&lt;/a&gt; pour ne pas alourdir celui-ci.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>